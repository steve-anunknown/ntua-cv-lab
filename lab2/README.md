Αυτό το εργαστήριο έχει τρία μέρη.

1) Ανίχνευση Οπτικής Ροής
2) Κάτι που δεν άκουσα
3) Συνένωση Εικόνων

Στα δύο πρώτα κυριαρχούν σήμερα τα νευρωνικά δίκτυα αλλά στην συνένωση
εικόνων ακόμα είναι δημοφιλείς οι παραδοσιακές μέθοδοι.

Ξεκινάμε με κάτι φαινομενικά άσχετο, την ανίχνευση δέρματος. Αυτό, γιατί για να εφαρμόσουμε γενικά την κύρια τεχνική πρέπει να έχουμε βρει περιοχές ενδιαφέροντος.

Ο rgb χώρος δεν είναι καλός για ανίχνευση δέρματος. Χρησιμοποιούνται άλλοι.
Το σημαντικό είναι να ικανοποιούνται τρία κριτήρια.
1) αντοχή σε αλλαγές φωτεινότητας
2) αντοχή σε διαφορετικά είδη δέρματος
3) κάτι για μικρές αποστάσεις που δεν πρόλαβα

Εμείς μάλλον θα ασχοληθούμε με HSV αλλά το V δεν μας πολυενδιαφέρει,
άρα ουσιαστικά ασχολούμαστε με HS (hue saturation).
Έχει το μειονέκτημα ότι έχει σχετικά μεγάλο κόστος μετατροπής από rgb 
σε hsv. Ο δε χώρος YCbCr έχει πιο γρήγορη μετατροπή. Τελικά, αυτός είναι
καλύτερος, γιατί εκεί αποδεικνύεται πειραματικά ότι το δέρμα ξεχωρίζεται
πιο εύκολα απ'ό,τι σε άλλους χώρους.

# Προπαρασκευή

Για το εργαστήριο, θα έχουμε κάποια δείγματα σημείων δέρματος και θα
ταιριάξουμε μία γκαουσσιανή κατανομή σε αυτά. Θα μπορούσε κανείς να
προσεγγίσει την κατανομή με περισσότερες γκαουσσιανές. Εμείς κάνουμε το
απλό. Αν εφαρμόσουμε, μετά, ένα πιθανοτικό κριτήριο στην εικόνα, τότε θα
έχουμε υψηλότερες πιθανότητες εκεί που όντως φαίνεται να υπάρχει δέρμα. Θα
εφαρμόσουμε ένα κατώφλι και θα πάρουμε τελικά τα σημεία του δέρματος. Μετά,
στην νέα εικόνα, θα κάνουμε άνοιγμα και κλείσιμο (κλείσιμο με μεγαλύτερο
δομικό στοιχείο αν κατάλαβα καλά) και μετά θα φράξουμε αυτές τις περιοχές
σε κουτάκια.

# 1ο Μέρος Οπτική Ροή

Διακρίνονται πυκνοί και αραιοί αλγόριθμοι οπτικής ροής.

Αν ένας αλγόριθμος υπολογίζει την οπτική ροή σε όλη την εικόνα,
τότε χαρακτηρίζεται πυκνός.

Αν υπολογίζει την οπτική ροή σε μία περιοχή της εικόνας μόνο,
τότε χαρακτηρίζεται αραίος.

Οι δύο κύριοι αλγόριθμοι είναι Horn - Schmuk και Lucas - Kanade. Η διαφορά
τους είναι ότι, ο μεν υποθέτει ότι κάθε πίξελ έχει την δικιά του ταχύτητα
αλλά ότι αυτή δεν μεταβάλλεται κατά πολύ σε γειτονικά πίξελ, ο δε υποθέτει
ότι, σε ένα παράθυρο, η ταχύτητα παραμένει σταθερή, δηλαδή τα γειτονικά
πίξελ έχουν την ίδια ταχύτητα.

Η λύση που προκύπτει για τον Lucas - Kanade είναι η ίδια με αυτήν που είχε
προκύψει για την ανίχνευση γωνιών. Δεν μπορεί να εφαρμοστεί, όμως, σε
οποιαδήποτε περιοχή της εικόνας. Πρέπει να εφαρμοστεί μόνο σε γωνίες, γιατί
ειδάλλως ο πίνακας που περιγράφει την λύση δεν είναι αντιστρέψιμος, άρα 
ουσιαστικά δεν βρίσκεται λύση (σουπερ μαθηματική εξήγηση). Άρα, δεν
εφαρμόζεται σε ακμές, αλλά σε γωνίες.

Το πρόβλημα είναι ότι υπολογίζει μόνο μικρές μετατοπίσεις, τύπου 1 με 2
πίξελ. Για αυτόν τον λόγο, εφαρμόζεται η πολυκλιμακωτή εκδοχή του.
Μειώνεται η διάσταση του πίνακα και εφαρμόζεται εκεί ο αλγόριθμος. Έτσι, 
αν στην εικόνα έχω μετατόπιση 10 πίξελ, τότε στην μικρή εικόνα, πχ διά 4,
θα έχω μετατόπιση 2.5 πίξελ. Έτσι, μεγάλες μετατοπίσεις μπορούν να αναχθούν
σε μικρές και να εντοπιστούν. Ουσιαστικά, οι μικρές μετατοπίσεις που
εντοπίζονται στις μικρές εικόνες σπρώχνουν τον αλγόριθμο στις μεγαλύτερες 
εικόνες προς την σωστή κατεύθυνση για να εντοπίσουν την μεγάλη κίνηση. Σαν
ευνοϊκές αρχικές συνθήκες. 

Εμείς, λοιπόν, ουσιαστικά θα βρούμε τις γωνίες στις περιοχές δέρματος που
θα έχουμε εντοπίσει και θα εφαρμόσουμε εκεί τον αλγόριθμο. Θα βγαίνουν
γύρω στα 20-30 χαρακτηριστικά, για μία καλή τιμή κατωφλιού. Θέλουμε την ροή
μόνο στα χαρακτηριστικά αυτά.



